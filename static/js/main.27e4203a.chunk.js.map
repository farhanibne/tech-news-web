{"version":3,"sources":["reducer.js","actions.js","context.js","SearchForm.js","Stories.js","Buttons.js","App.js","index.js"],"names":["reducer","state","action","type","isLoading","hits","payload","nbPages","filter","story","objectID","query","page","nextPage","prevPage","Error","initialState","AppContext","React","createContext","AppProvider","children","useReducer","dispatch","fetchStories","url","a","fetch","response","json","data","console","log","useEffect","Provider","value","removeStory","id","handleSearch","handlePage","useGlobalContext","useContext","SearchForm","className","onSubmit","e","preventDefault","onChange","target","Stories","map","title","num_comments","points","author","key","href","rel","onClick","Buttons","disabled","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.27e4203a.chunk.js","sourcesContent":["import {\r\n  SET_LOADING,\r\n  SET_STORIES,\r\n  REMOVE_STORY,\r\n  HANDLE_PAGE,\r\n  HANDLE_SEARCH,\r\n} from './actions'\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_LOADING:\r\n      return { ...state, isLoading: true }\r\n    case SET_STORIES:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hits: action.payload.hits,\r\n        nbPages: action.payload.nbPages,\r\n      }\r\n    case REMOVE_STORY:\r\n      return {\r\n        ...state,\r\n        hits: state.hits.filter((story) => story.objectID !== action.payload),\r\n      }\r\n    case HANDLE_SEARCH:\r\n      return { ...state, query: action.payload, page: 0 }\r\n    case HANDLE_PAGE:\r\n      if (action.payload === 'inc') {\r\n        let nextPage = state.page + 1\r\n        if (nextPage > state.nbPages - 1) {\r\n          nextPage = 0\r\n        }\r\n        return { ...state, page: nextPage }\r\n      }\r\n      if (action.payload === 'dec') {\r\n        let prevPage = state.page - 1\r\n        if (prevPage < 0) {\r\n          prevPage = state.nbPages - 1\r\n        }\r\n        return { ...state, page: prevPage }\r\n      } break\r\n    default:\r\n      throw new Error(`no mathching \"${action.type}\" action type`)\r\n  }\r\n}\r\nexport default reducer\r\n","export const SET_LOADING = 'SET_LOADING'\r\nexport const SET_STORIES = 'SET_STORIES'\r\nexport const REMOVE_STORY = 'REMOVE_STORY'\r\nexport const HANDLE_PAGE = 'HANDLE_PAGE'\r\nexport const HANDLE_SEARCH = 'HANDLE_SEARCH'\r\n","import React, { useContext, useEffect, useReducer } from 'react'\r\n\r\nimport {\r\n  SET_LOADING,\r\n  SET_STORIES,\r\n  REMOVE_STORY,\r\n  HANDLE_PAGE,\r\n  HANDLE_SEARCH,\r\n} from './actions'\r\nimport reducer from './reducer'\r\n\r\nconst API_ENDPOINT = 'https://hn.algolia.com/api/v1/search?'\r\n\r\nconst initialState = {\r\n  isLoading: true,\r\n  hits: [],\r\n  query: 'react',\r\n  page: 0,\r\n  nbPages: 0,\r\n}\r\n\r\nconst AppContext = React.createContext()\r\n\r\nconst AppProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n\r\n  const fetchStories = async (url) => {\r\n    dispatch({ type: SET_LOADING })\r\n    try {\r\n      const response = await fetch(url)\r\n      const data = await response.json()\r\n      dispatch({\r\n        type: SET_STORIES,\r\n        payload: { hits: data.hits, nbPages: data.nbPages },\r\n      })\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  const removeStory = (id) => {\r\n    dispatch({ type: REMOVE_STORY, payload: id })\r\n  }\r\n  const handleSearch = (query) => {\r\n    dispatch({ type: HANDLE_SEARCH, payload: query })\r\n  }\r\n  const handlePage = (value) => {\r\n    dispatch({ type: HANDLE_PAGE, payload: value })\r\n  }\r\n  useEffect(() => {\r\n    fetchStories(`${API_ENDPOINT}query=${state.query}&page=${state.page}`)\r\n  }, [state.query, state.page])\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{ ...state, removeStory, handleSearch, handlePage }}\r\n    >\r\n      {children}\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n// make sure use\r\nexport const useGlobalContext = () => {\r\n  return useContext(AppContext)\r\n}\r\n\r\nexport { AppContext, AppProvider }\r\n","import React from 'react'\r\nimport { useGlobalContext } from './context'\r\n\r\nconst SearchForm = () => {\r\n  const { query, handleSearch } = useGlobalContext()\r\n\r\n  return (\r\n    <form className='search-form' onSubmit={(e) => e.preventDefault()}>\r\n      <h2>search News</h2>\r\n      <input\r\n        type='text'\r\n        className='form-input'\r\n        value={query}\r\n        onChange={(e) => handleSearch(e.target.value)}\r\n      />\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default SearchForm\r\n","import React from 'react'\r\n\r\nimport { useGlobalContext } from './context'\r\n\r\nconst Stories = () => {\r\n  const { isLoading, hits, removeStory } = useGlobalContext()\r\n\r\n  if (isLoading) {\r\n    return <div className='loading'></div>\r\n  }\r\n  return (\r\n    <section className='stories'>\r\n      {hits.map((story) => {\r\n        const { objectID, title, num_comments, url, points, author } = story\r\n        return (\r\n          <article key={objectID} className='story'>\r\n            <h4 className='title'>{title}</h4>\r\n            <p className='info'>\r\n              {points} points by <span>{author} | </span> {num_comments}{' '}\r\n              comments\r\n            </p>\r\n            <div>\r\n              <a\r\n                href={url}\r\n                className='read-link'\r\n                target='_blank'\r\n                rel='noopener noreferrer'\r\n              >\r\n                read more\r\n              </a>\r\n              <button\r\n                className='remove-btn'\r\n                onClick={() => removeStory(objectID)}\r\n              >\r\n                remove\r\n              </button>\r\n            </div>\r\n          </article>\r\n        )\r\n      })}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Stories\r\n","import React from 'react'\r\nimport { useGlobalContext } from './context'\r\n\r\nconst Buttons = () => {\r\n  const { isLoading, page, nbPages, handlePage } = useGlobalContext()\r\n\r\n  return (\r\n    <div className='btn-container'>\r\n      <button disabled={isLoading} onClick={() => handlePage('dec')}>\r\n        prev\r\n      </button>\r\n      <p>\r\n        {page + 1} of {nbPages}\r\n      </p>\r\n      <button disabled={isLoading} onClick={() => handlePage('inc')}>\r\n        next\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Buttons\r\n","import React from 'react'\r\nimport SearchForm from './SearchForm'\r\nimport Stories from './Stories'\r\nimport Buttons from './Buttons'\r\nfunction App() {\r\n  return (\r\n    <div  >\r\n      <SearchForm />\r\n      <Stories />\r\n      <Buttons />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport { AppProvider } from './context'\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <AppProvider>\r\n\r\n      <App />\r\n    </AppProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}